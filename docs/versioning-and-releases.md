# 版本控制和发布

## 概述

SDAT-Method使用语义化版本控制（SemVer）来管理版本和发布。本文档概述了版本控制策略、发布流程和版本号的含义。

## 版本号格式

SDAT-Method遵循语义化版本控制规范：`MAJOR.MINOR.PATCH`

- **MAJOR**：不兼容的API更改
- **MINOR**：向后兼容的功能添加
- **PATCH**：向后兼容的错误修复

### 版本号示例

- `1.0.0` - 主要版本，包含重大更改
- `1.1.0` - 次要版本，添加新功能
- `1.1.1` - 补丁版本，修复错误

## 发布类型

### 主要版本（Major Releases）

- 包含重大架构更改
- 可能破坏向后兼容性
- 需要用户迁移或更新
- 示例：从V1到V2的迁移

### 次要版本（Minor Releases）

- 添加新功能或代理
- 保持向后兼容性
- 可能包含新的扩展包
- 示例：添加新的游戏开发扩展包

### 补丁版本（Patch Releases）

- 错误修复和安全更新
- 文档改进
- 性能优化
- 示例：修复安装脚本中的错误

## 发布流程

### 1. 开发阶段

- 在`next`分支进行开发
- 使用功能分支进行新功能开发
- 通过拉取请求进行代码审查

### 2. 准备发布

- 更新版本号
- 更新CHANGELOG.md
- 运行测试套件
- 验证安装脚本

### 3. 发布

- 合并到`main`分支
- 创建Git标签
- 发布到npm
- 更新文档

### 4. 发布后

- 监控安装和错误报告
- 响应用户反馈
- 准备下一个版本

## 版本控制工具

### 自动版本控制

SDAT-Method使用自动化工具来管理版本：

- **semantic-release**：自动版本控制和发布
- **conventional commits**：标准化提交消息
- **auto update**：自动更新相关文件中的版本号

### 手动版本控制

对于需要手动控制的版本：

```bash
# 更新版本号
npm version patch  # 补丁版本
npm version minor  # 次要版本
npm version major  # 主要版本
```

## 扩展包版本控制

### 独立版本控制

每个扩展包都有自己的版本号：

- 扩展包可以独立于核心框架发布
- 版本号格式：`扩展包名@版本号`
- 示例：`sdat-2d-game-dev@1.2.0`

### 版本同步

- 扩展包版本可以与核心框架同步
- 使用自动化工具保持版本一致
- 支持独立更新和发布

## 兼容性矩阵

### 核心框架兼容性

| 核心版本 | 扩展包版本 | 兼容性          |
| -------- | ---------- | --------------- |
| 2.x.x    | 2.x.x      | ✅ 完全兼容     |
| 2.x.x    | 1.x.x      | ⚠️ 可能需要更新 |
| 2.x.x    | 0.x.x      | ❌ 不兼容       |

### 升级指南

- 主要版本升级需要迁移指南
- 次要版本升级通常向后兼容
- 补丁版本升级通常无需操作

## 发布检查清单

### 发布前检查 所有测试通过 文档更新完成 CHANGELOG.md更新 版本号正确 安装脚本测试通过

### 发布后检查 npm包发布成功 GitHub标签创建 发布说明更新 社区通知发送

## 长期支持（LTS）

### LTS版本

- 主要版本可能被标记为LTS
- LTS版本获得长期安全更新
- 用户可以选择使用LTS版本以获得稳定性

### LTS策略

- LTS版本支持18个月
- 仅包含安全修复
- 不添加新功能
- 定期安全更新

## 版本弃用

### 弃用策略

- 提前6个月通知弃用
- 在文档中标记弃用功能
- 提供迁移指南
- 在下一个主要版本中移除

### 弃用通知

- 在CHANGELOG.md中记录
- 在文档中标记
- 在Discord中公告
- 通过GitHub发布说明

## 总结

SDAT-Method的版本控制策略旨在：

- 提供稳定的用户体验
- 支持快速创新
- 保持向后兼容性
- 简化升级过程

通过遵循语义化版本控制和自动化发布流程，SDAT-Method确保用户可以：

- 安全地升级到新版本
- 了解版本之间的差异
- 选择适合其需求的版本
- 获得长期支持和稳定性
