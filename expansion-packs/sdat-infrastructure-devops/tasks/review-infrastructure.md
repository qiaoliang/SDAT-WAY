# Infrastructure Review Task

## Purpose

对现有基础设施进行全面审查，识别改进机会、安全隐患，并评估其与最佳实践的契合度。此任务有助于维护基础设施健康、优化成本，并确保持续符合组织要求。

## Inputs

- 当前基础设施文档
- 监控与日志数据
- 近期事件报告
- 成本与性能指标
- `infrastructure-checklist.md` 主要审查框架

## Key Activities & Instructions

### 1. Confirm Interaction Mode

- 询问用户：“您希望如何进行基础设施审查？我们可以选择以下两种方式：
  A. **默认增量模式**：我们将逐步、系统地按照清单的每个章节进行审查，对每一项都记录发现，然后再进入下一章节。这种方式审查最为全面。
  B. **‘YOLO’ 快速模式**：我可以对所有基础设施组件进行快速整体评估，并直接给出一份综合审查报告。这种方式更快，但可能遗漏细节问题。”
- 请用户选择其偏好的审查模式，并根据选择继续后续流程。

### 2. Prepare for Review

- 收集并整理当前的基础设施文档
- 获取监控与日志系统的运行数据
- 审查近期事件报告，关注重复性问题
- 汇总成本与性能指标
- <critical_rule>在继续之前，必须与用户明确审查范围和边界</critical_rule>

### 3. Conduct Systematic Review

- **如果选择了“增量模式”：**
    - 针对基础设施清单的每个章节，依次进行以下操作：
        - **a. 章节聚焦说明：** 解释本章节主要审查基础设施的哪些方面
        - **b. 条目逐项审查：** 将清单中的每一项与当前基础设施实际情况进行对照检查
        - **c. 记录现状：** 详细记录当前实现对每一项的覆盖情况或存在的不足
        - **d. 识别改进点：** 针对发现的问题，提出具体的改进建议
        - **e. 提供高级自我反思与引导选项（#offer-advanced-self-refinement--elicitation-options）**
        - **f. 章节小结：** 在进入下一章节前，给出本章节的评估总结

- **如果选择了“YOLO 快速模式”：**
    - 对所有基础设施组件进行快速整体评估
    - 记录主要发现和改进机会
    - 提供一份综合审查报告
    - <important_note>在 YOLO 模式下呈现完整审查后，您仍然可以主动提供“高级自我反思与引导选项”菜单，以便对存在问题的具体领域进行更深入探讨。</important_note>

### 4. 安全、性能、成本、可靠性等关键领域分级（严重、高、中、低）

- 针对发现的问题，记录改进建议，并估算所需工作量及其影响
- 制定改进路线图，建议实施时间表
- 明确指出成本优化的机会

### 5. SDAT 集成评估

- 评估当前基础设施对其他 SDAT Agent 的支持情况：
    - **开发支持：** Mira、Enrique 及全栈开发工作流
    - **产品对齐：** Oli
    - **架构合规性：** Alphonse 的决策
    - 记录 SDAT 集成中存在的任何差距

### 6. 架构升级评估

- **DevOps/平台 → 架构师升级审查：**
    - 针对审查发现，评估是否存在需要架构层面介入的问题：
        - **技术债务升级：**
            - 识别影响系统架构的基础设施技术债务
            - 记录哪些技术债务需要架构重构，哪些可通过运维修复
            - 评估技术债务的累积对系统可维护性和可扩展性的影响
        - **性能/安全问题升级：**（不仅仅是运维层面的调优）
            - 记录需要架构安全模式变更的安全漏洞
            - 评估需要架构扩展策略调整的容量与可扩展性问题
        - **技术演进升级：**
            - 识别需要架构迁移规划的过时技术
            - 记录可提升系统架构的新技术机会
            - 评估需要架构集成策略调整的技术兼容性问题
    - **升级决策矩阵：**
        - **关键架构问题：** 需立即由架构师 Agent 介入进行系统重构
        - **重要架构关注点：** 建议架构师 Agent 审查，考虑架构演进
        - **运维类问题：** 可通过运维改进解决，无需架构变更
        - **不明确/模糊问题：** 升级级别不确定时，需与用户沟通，征求指导和决策
    - 记录升级建议，需包含明确的理由和影响评估
    - <critical_rule>如升级分类不明确或存在歧义，必须暂停并请用户指导如何分级及后续处理方式</critical_rule>

### 7. 结果呈现与行动规划

- 准备关键发现的高层次摘要
- 为实施团队编写详细的技术文档
- 制定针对关键和高优先级问题的行动计划
- **如有需要，准备架构升级报告：**
    - 记录所有需架构师 Agent 关注的发现
    - 针对架构变更或审查提供具体建议
    - 包含架构相关工作的影响评估与优先级
    - 准备升级摘要，便于与架构师 Agent 协作
- 针对特定领域安排后续复审
- <important_note>以便于后续决策和升级需求明确的方式呈现所有发现。</important_note>

### 8. 升级处理流程执行

- **如发现关键架构问题：**
    - **立即升级至架构师 Agent：**
        - 提交包含关键发现的架构升级报告
        - 请求架构师对相关问题进行审查并提出潜在重构建议
        - 与架构师 Agent 协作，确定架构变更的优先级和时间表
        - 记录升级处理结果及后续架构工作计划
- **如发现重要架构关注点：**
    - **安排架构师审查会议：**
        - 准备详细的技术发现供架构师 Agent 审查
        - 请求架构师对相关关注点进行评估
        - 安排协作规划会议，探讨架构演进的可能性
        - 记录架构师建议及后续跟进计划
- **如仅发现运维类问题：**
    - 直接制定运维改进计划，无需架构升级
    - 持续关注运维变更对未来架构的潜在影响
- **如升级级别不明确或存在歧义：**
    - **需用户指导：**
        - 向用户呈现不明确的发现及升级选项
        - 请求用户就升级级别和处理方式提供指导
        - 记录用户决策及其理由
        - 按照用户指示的升级路径继续处理
- <critical_rule>所有关键架构升级必须在实施前由架构师 Agent 记录并确认</critical_rule>

## 输出

一份全面的基础设施审查报告，内容包括：

1. **各基础设施组件的现状评估**
2. **按优先级排序的发现及其严重性评级**
3. **详细的改进建议**，包含工作量与影响评估
4. **成本优化机会**
5. **SDAT 集成评估**
6. **架构升级评估**，并给出明确的升级建议
7. **关键改进与架构相关工作的行动计划**
8. **如适用，升级处理文档**

## 提供高级自我反思与需求获取选项

向用户展示以下"Advanced Reflective, Elicitation & Brainstorming Actions"列表。解释这些是可选的步骤，用于在最终确定当前部分并继续之前帮助确保质量、探索替代方案并加深对当前部分的理解。用户可以通过数字选择行动，或选择跳过此步骤并继续完成该部分。

"为确保当前部分的质量：[具体部分名称] 并确保其稳健性、探索替代方案并考虑所有角度，我可以执行以下任何行动。输入8以完成并继续：

**我可以执行的任务：**

1. 根本原因分析与模式识别
2. 行业最佳实践对比
3. 未来可扩展性与增长影响评估
4. 安全漏洞与威胁模型分析
5. 运营效率与自动化机会
6. 成本结构分析与优化策略
7. 合规性与治理差距评估
8. 完成此部分并继续。

"在我执行选定的行动后，我们可以讨论结果并决定对此部分进行任何进一步的修订。"

重复：询问用户是否希望执行另一个反思、需求获取和头脑风暴行动，或者选择 #8
