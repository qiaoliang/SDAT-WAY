template:
    id: frontend-spec-template-v2
    name: UI/UX 规范
    version: 2.0
    output:
        format: markdown
        filename: docs/front-end-spec.md
        title: "{{project_name}} UI/UX 规范"

workflow:
    mode: interactive
    elicitation: advanced-elicitation

sections:
    - id: introduction
      title: 介绍
      instruction: |
          审查提供的文档，包括项目简介、PRD 和任何用户研究，以收集上下文。在开始规范之前，专注于理解用户需求、痛点和期望结果。

          确定文档的目的和范围。保持以下内容，但确保项目名称正确替换。
      content: |
          本文档定义了 {{project_name}} 用户界面的用户体验目标、信息架构、用户流程和视觉设计规范。它作为视觉设计和前端开发的基础，确保一致且以用户为中心的体验。
      sections:
          - id: ux-goals-principles
            title: 整体 UX 目标和原则
            instruction: |
                与用户一起建立和记录以下内容。如果尚未定义，请促进讨论以确定:

                1. 目标用户角色 - 从 PRD 中提取详细信息或确认现有角色
                2. 关键可用性目标 - 理解用户成功的含义
                3. 核心设计原则 - 建立 3-5 个指导原则
            elicit: true
            sections:
                - id: user-personas
                  title: 目标用户角色
                  template: "{{persona_descriptions}}"
                  examples:
                      - "**Power User:** 需要高级功能和效率的技术专业人员"
                      - "**Casual User:** 偶尔使用者，优先考虑易用性和清晰指导"
                      - "**Administrator:** 需要控制和监督能力的系统管理员"
                - id: usability-goals
                  title: 可用性目标
                  template: "{{usability_goals}}"
                  examples:
                      - "易学性: 新用户可以在 5 分钟内完成核心任务"
                      - "使用效率: 高级用户可以以最少的点击完成频繁任务"
                      - "错误预防: 清晰的验证和确认以防止破坏性操作"
                      - "记忆性: 不经常使用的用户可以不重新学习就返回"
                - id: design-principles
                  title: 设计原则
                  template: "{{design_principles}}"
                  type: numbered-list
                  examples:
                      - "**Clarity over cleverness** - 优先考虑清晰沟通而不是美学创新"
                      - "**Progressive disclosure** - 只显示需要的内容，在需要时显示"
                      - "**Consistent patterns** - 在整个应用程序中使用熟悉的 UI 模式"
                      - "**Immediate feedback** - 每个动作都应该有明确的、即时的反馈"
                      - "**Accessible by default** - 从一开始就为所有用户设计"
          - id: changelog
            title: 变更日志
            type: table
            columns: [Date, Version, Description, Author]
            instruction: 跟踪文档版本和变更

    - id: information-architecture
      title: 信息架构 (IA)
      instruction: |
          与用户合作创建综合信息架构:

          1. 构建一个站点地图或屏幕库存，显示所有主要区域
          2. 定义导航结构 (主、次、面包屑)
          3. 使用 Mermaid 图表进行视觉表示
          4. 考虑用户心理模型和预期分组
      elicit: true
      sections:
          - id: sitemap
            title: Site Map / Screen Inventory
            type: mermaid
            mermaid_type: graph
            template: "{{sitemap_diagram}}"
            examples:
                - |
                    graph TD
                        A[Homepage] --> B[Dashboard]
                        A --> C[Products]
                        A --> D[Account]
                        B --> B1[Analytics]
                        B --> B2[Recent Activity]
                        C --> C1[Browse]
                        C --> C2[Search]
                        C --> C3[Product Details]
                        D --> D1[Profile]
                        D --> D2[Settings]
                        D --> D3[Billing]
          - id: navigation-structure
            title: 导航结构
            template: |
                **Primary Navigation:** {{primary_nav_description}}

                **Secondary Navigation:** {{secondary_nav_description}}

                **Breadcrumb Strategy:** {{breadcrumb_strategy}}

    - id: user-flows
      title: 用户流程
      instruction: |
          对于 PRD 中识别的每个关键用户任务:

          1. 明确用户的目标
          2. 包括决策点在内的所有步骤
          3. 考虑边缘情况和错误状态
          4. 使用 Mermaid 流程图进行清晰
          5. 如果存在详细流程，请链接到外部工具 (Figma/Miro)

          为每个主要流程创建子部分。
      elicit: true
      repeatable: true
      sections:
          - id: flow
            title: "{{flow_name}}"
            template: |
                **User Goal:** {{flow_goal}}

                **Entry Points:** {{entry_points}}

                **Success Criteria:** {{success_criteria}}
            sections:
                - id: flow-diagram
                  title: 流程图
                  type: mermaid
                  mermaid_type: graph
                  template: "{{flow_diagram}}"
                - id: edge-cases
                  title: "边缘情况和错误处理:"
                  type: bullet-list
                  template: "- {{edge_case}}"
                - id: notes
                  template: "**Notes:** {{flow_notes}}"

    - id: wireframes-mockups
      title: 线框图和原型
      instruction: |
          澄清详细视觉设计将在哪里创建 (Figma, Sketch 等) 以及如何引用它们。如果需要低保真线框图，请提供帮助概念化关键屏幕的布局。
      elicit: true
      sections:
          - id: design-files
            template: "**Primary Design Files:** {{design_tool_link}}"
          - id: key-screen-layouts
            title: 关键屏幕布局
            repeatable: true
            sections:
                - id: screen
                  title: "{{screen_name}}"
                  template: |
                      **Purpose:** {{screen_purpose}}

                      **Key Elements:**
                      - {{element_1}}
                      - {{element_2}}
                      - {{element_3}}

                      **Interaction Notes:** {{interaction_notes}}

                      **Design File Reference:** {{specific_frame_link}}

    - id: component-library
      title: 组件库 / 设计系统
      instruction: |
          讨论是否使用现有设计系统或创建新设计系统。如果创建新设计系统，请识别基础组件及其关键状态。请注意，详细的技术规范属于前端架构。
      elicit: true
      sections:
          - id: design-system-approach
            template: "**Design System Approach:** {{design_system_approach}}"
          - id: core-components
            title: 核心组件
            repeatable: true
            sections:
                - id: component
                  title: "{{component_name}}"
                  template: |
                      **Purpose:** {{component_purpose}}

                      **Variants:** {{component_variants}}

                      **States:** {{component_states}}

                      **Usage Guidelines:** {{usage_guidelines}}

    - id: branding-style
      title: 品牌和风格指南
      instruction: 链接到现有风格指南或定义关键品牌元素。如果存在，请确保与公司品牌指南保持一致。
      elicit: true
      sections:
          - id: visual-identity
            title: 视觉标识
            template: "**Brand Guidelines:** {{brand_guidelines_link}}"
          - id: color-palette
            title: 颜色调色板
            type: table
            columns: ["Color Type", "Hex Code", "Usage"]
            rows:
                - ["Primary", "{{primary_color}}", "{{primary_usage}}"]
                - ["Secondary", "{{secondary_color}}", "{{secondary_usage}}"]
                - ["Accent", "{{accent_color}}", "{{accent_usage}}"]
                - [
                      "Success",
                      "{{success_color}}",
                      "Positive feedback, confirmations",
                  ]
                - [
                      "Warning",
                      "{{warning_color}}",
                      "Cautions, important notices",
                  ]
                - ["Error", "{{error_color}}", "Errors, destructive actions"]
                - [
                      "Neutral",
                      "{{neutral_colors}}",
                      "Text, borders, backgrounds",
                  ]
          - id: typography
            title: 排版
            sections:
                - id: font-families
                  title: 字体家族
                  template: |
                      - **Primary:** {{primary_font}}
                      - **Secondary:** {{secondary_font}}
                      - **Monospace:** {{mono_font}}
                - id: type-scale
                  title: 类型比例
                  type: table
                  columns: ["Element", "Size", "Weight", "Line Height"]
                  rows:
                      - ["H1", "{{h1_size}}", "{{h1_weight}}", "{{h1_line}}"]
                      - ["H2", "{{h2_size}}", "{{h2_weight}}", "{{h2_line}}"]
                      - ["H3", "{{h3_size}}", "{{h3_weight}}", "{{h3_line}}"]
                      - [
                            "Body",
                            "{{body_size}}",
                            "{{body_weight}}",
                            "{{body_line}}",
                        ]
                      - [
                            "Small",
                            "{{small_size}}",
                            "{{small_weight}}",
                            "{{small_line}}",
                        ]
          - id: iconography
            title: 图标
            template: |
                **Icon Library:** {{icon_library}}

                **Usage Guidelines:** {{icon_guidelines}}
          - id: spacing-layout
            title: 间距和布局
            template: |
                **Grid System:** {{grid_system}}

                **Spacing Scale:** {{spacing_scale}}

    - id: accessibility
      title: 无障碍要求
      instruction: 根据目标合规级别和用户需求定义具体无障碍要求。要全面但实用。
      elicit: true
      sections:
          - id: compliance-target
            title: 合规目标
            template: "**标准:** {{compliance_standard}}"
          - id: key-requirements
            title: 关键要求
            template: |
                **Visual:**
                - Color contrast ratios: {{contrast_requirements}}
                - Focus indicators: {{focus_requirements}}
                - Text sizing: {{text_requirements}}

                **Interaction:**
                - Keyboard navigation: {{keyboard_requirements}}
                - Screen reader support: {{screen_reader_requirements}}
                - Touch targets: {{touch_requirements}}

                **Content:**
                - Alternative text: {{alt_text_requirements}}
                - Heading structure: {{heading_requirements}}
                - Form labels: {{form_requirements}}
          - id: testing-strategy
            title: 测试策略
            template: "{{accessibility_testing}}"

    - id: responsiveness
      title: 响应策略
      instruction: 定义不同设备大小的断点和适应策略。考虑技术约束和用户上下文。
      elicit: true
      sections:
          - id: breakpoints
            title: 断点
            type: table
            columns: ["Breakpoint", "Min Width", "Max Width", "Target Devices"]
            rows:
                - [
                      "Mobile",
                      "{{mobile_min}}",
                      "{{mobile_max}}",
                      "{{mobile_devices}}",
                  ]
                - [
                      "Tablet",
                      "{{tablet_min}}",
                      "{{tablet_max}}",
                      "{{tablet_devices}}",
                  ]
                - [
                      "Desktop",
                      "{{desktop_min}}",
                      "{{desktop_max}}",
                      "{{desktop_devices}}",
                  ]
                - ["Wide", "{{wide_min}}", "-", "{{wide_devices}}"]
          - id: adaptation-patterns
            title: 适应模式
            template: |
                **Layout Changes:** {{layout_adaptations}}

                **Navigation Changes:** {{nav_adaptations}}

                **Content Priority:** {{content_adaptations}}

                **Interaction Changes:** {{interaction_adaptations}}

    - id: animation
      title: 动画和微交互
      instruction: 定义运动设计原则和关键交互。考虑性能和无障碍。
      elicit: true
      sections:
          - id: motion-principles
            title: 运动原则
            template: "{{motion_principles}}"
          - id: key-animations
            title: 关键动画
            repeatable: true
            template: "- **{{animation_name}}:** {{animation_description}} (Duration: {{duration}}, Easing: {{easing}})"

    - id: performance
      title: 性能考虑
      instruction: 定义影响 UX 设计决策的性能目标和策略。
      sections:
          - id: performance-goals
            title: 性能目标
            template: |
                - **Page Load:** {{load_time_goal}}
                - **Interaction Response:** {{interaction_goal}}
                - **Animation FPS:** {{animation_goal}}
          - id: design-strategies
            title: 设计策略
            template: "{{performance_strategies}}"

    - id: next-steps
      title: 下一步
      instruction: |
          完成 UI/UX 规范后:

          1. 建议与利益相关者进行审查
          2. 建议在设计工具中创建/更新视觉设计
          3. 准备与设计架构师交接前端架构
          4. 注意任何开放问题或决策需要
      sections:
          - id: immediate-actions
            title: 立即行动
            type: numbered-list
            template: "{{action}}"
          - id: design-handoff-checklist
            title: 设计交接清单
            type: checklist
            items:
                - "All user flows documented"
                - "Component inventory complete"
                - "Accessibility requirements defined"
                - "Responsive strategy clear"
                - "Brand guidelines incorporated"
                - "Performance goals established"

    - id: checklist-results
      title: 清单结果
      instruction: 如果存在 UI/UX 清单，请在此文档上运行它并报告结果。
