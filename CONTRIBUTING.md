# 为这个项目做贡献

感谢您考虑为这个项目做贡献！本文档概述了贡献流程和一些需要遵循的指导原则。

🆕 **GitHub或拉取请求新手？** 首先查看我们的[初学者友好拉取请求指南](docs/how-to-contribute-with-pull-requests.md)！

📋 **在贡献之前**，请阅读我们的[指导原则](docs/GUIDING-PRINCIPLES.md)以了解SDAT Method的核心哲学和架构决策。

另外请注意，我们使用GitHub的讨论功能来建立一个社区来讨论潜在的想法、用途、添加和改进。

## 行为准则

通过参与这个项目，您同意遵守我们的行为准则。请在参与之前阅读它。

## 如何贡献

### 报告错误

1. **首先检查现有问题**以避免重复
2. **创建新问题时使用错误报告模板** - 它将指导您提供：
    - 清晰的错误描述
    - 重现步骤
    - 预期与实际行为
    - 模型/IDE/SDAT版本详情
    - 截图或链接（如果适用）
3. **考虑在Discord中讨论**（#bugs-issues频道）以获得快速帮助
4. **如果您正在修复，请注明**以避免重复工作

### 建议功能

1. **首先在Discord中讨论**（#general-dev频道）- 功能请求模板会询问您是否已经这样做了
2. **检查现有问题和讨论**以避免重复
3. **创建问题时使用功能请求模板** - 它将指导您：
    - 确认Discord讨论
    - 描述它解决的问题
    - 解释您的解决方案
    - 列出考虑的替代方案
4. **具体说明**为什么这个功能会造福SDAT社区

### 拉取请求流程

⚠️ **在开始工作之前：**

1. **对于错误**：检查是否存在问题（如果没有，使用错误模板创建一个）
2. **对于功能**：确保您已在Discord中讨论（#general-dev）并创建了功能请求问题
3. **对于重大更改**：始终先打开问题以讨论对齐

请只提出小的粒度提交！如果它很大或很重要，请在讨论标签页中讨论并首先打开问题。我不希望您在可能被拒绝的潜在非常大的PR上浪费时间，因为它不对齐或偏离其他计划的更改。沟通并让我们共同努力构建和改进这个伟大的社区项目！

**重要**：所有贡献必须符合我们的[指导原则](docs/GUIDING-PRINCIPLES.md)。要点：

- 保持开发代理精简 - 他们需要编码的上下文，而不是文档
- Web/规划代理可以更大，具有更复杂的任务
- 一切都是自然语言（markdown）- 核心框架中没有代码
- 使用扩展包处理特定领域的功能

#### 您的PR应该提交到哪个分支？

**提交到`next`分支**（大多数贡献）：

- ✨ 新功能或代理
- 🎨 现有功能的增强
- 📚 文档更新
- ♻️ 代码重构
- ⚡ 性能改进
- 🧪 新测试
- 🎁 新扩展包

**提交到`main`分支**（仅限关键）：

- 🚨 破坏基本功能的严重错误修复
- 🔒 安全补丁
- 📚 修复危险的不正确文档
- 🐛 阻止安装或基本使用的错误

**有疑问时，提交到`next`**。我们宁愿在更改进入稳定版本之前彻底测试它们。

#### PR大小指导原则

- **理想PR大小**：200-400行代码更改
- **最大PR大小**：800行（不包括生成的文件）
- **每个PR一个功能/修复**：每个PR应该解决单个问题或添加一个功能
- **如果您的更改更大**：将其分解为可以独立审查的多个较小的PR
- **相关更改**：即使相关更改也应该分开PR，如果它们提供独立价值

#### 分解大型PR

如果您的更改超过800行，使用此检查清单来拆分它： 我可以将重构与功能实现分开吗？ 我可以在一个PR中引入新的API/接口，在另一个PR中实现吗？ 我可以按文件或模块拆分吗？ 我可以首先创建一个包含共享实用程序的基础PR吗？ 我可以将测试添加与实现分开吗？ 即使更改相关，它们能否独立提供价值？

示例分解：

1. PR #1：添加实用函数和类型（100行）
2. PR #2：重构现有代码以使用实用程序（200行）
3. PR #3：使用重构代码实现新功能（300行）
4. PR #4：添加全面测试（200行）

**注意**：PR #1和#4可以同时提交，因为它们提供独立价值且不依赖彼此的合并顺序。

#### 拉取请求步骤

1. Fork仓库
2. 创建新分支（`git checkout -b feature/your-feature-name`）
3. 进行更改
4. 运行任何测试或linting以确保质量
5. 使用清晰、描述性的消息提交更改，遵循我们的提交消息约定
6. 推送到您的分支（`git push origin feature/your-feature-name`）
7. 针对主分支打开拉取请求

## 问题模板

我们使用GitHub问题模板确保提供所有必要信息：

- **错误报告**：自动指导您提供重现步骤、环境详情和预期行为
- **功能请求**：需要Discord讨论确认并要求问题/解决方案描述

使用这些模板有助于维护者更快地理解和处理您的贡献。

## 拉取请求描述指导原则

保持PR描述简短明了，遵循此模板：

### PR描述模板

保持您的PR描述简洁和重点突出。使用此模板：

```markdown
## 什么1-2句话描述发生了什么变化

## 为什么1-2句话解释为什么需要这个更改
修复 #[问题编号]（如果适用）

## 如何2-3个要点列出您如何实现它

-
-
-

## 测试1-2句话说明您如何测试这个
```

**最大PR描述长度：200字**（如果需要，不包括代码示例）

### 好与坏的PR描述

❌ **坏示例：**

> 这个革命性的PR通过实现最先进的解决方案引入了系统架构的范式转变，该解决方案利用尖端方法来优化性能指标，并通过创新方法为利益相关者提供前所未有的价值...

✅ **好示例：**

> **什么：** 添加了代理依赖解析的验证
> **为什么：** 当代理有循环依赖时，构建会静默失败
> **如何：**
>
> - 在dependency-resolver.js中添加了循环检测
> - 抛出带有依赖链的清晰错误
>   **测试：** 在3个代理之间测试了循环依赖

## 提交消息约定

使用约定式提交格式：

- `feat:` 新功能
- `fix:` 错误修复
- `docs:` 仅文档
- `refactor:` 既不修复错误也不添加功能的代码更改
- `test:` 添加缺失的测试
- `chore:` 构建过程或辅助工具的更改

保持提交消息在72个字符以下。

### 原子提交

每个提交应该代表一个逻辑更改：

- **DO：** 每个提交一个错误修复
- **DO：** 每个提交一个功能添加
- **DO NOT：** 将重构与错误修复混合
- **DO NOT：** 组合不相关的更改

## 代码风格

- 遵循现有的代码风格和约定
- 为复杂逻辑编写清晰的注释

## 许可证

通过为这个项目做贡献，您同意您的贡献将在与项目相同的许可证下获得许可。
